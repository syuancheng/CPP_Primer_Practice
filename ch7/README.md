# Chapter 7 Class 类

## 定义抽象数据类型
![](image/ch7_1.png)

### 类成员
- 数据成员
  - 声明在类内部
  - this
    - Sales_data *const. total.combine(trans); total的地址被绑定到隐式的this参数上。
    - 是一个常量指针，指向的值可以改变， 但是指针的值不能改变。
- 成员函数
  - 声明在类内部
  - 定义可内可外
  - 定义在类内部的函数是隐式的inline函数

### 非成员函数
- 定义声明都在类外


### 构造函数(constructor) [11,15]
- 类通过一个或者多个成员函数来控制对象初始化过程，这些特殊函数叫做构造函数。
- 编译器创建的**合成默认构造函数**
  - 类内存在初始值，用它来初始化成员。
  - 默认初始化
  - =default表示要求编译器生成构造函数。
- 构造函数初始值列表
  - 唯一的目的就是为数据成员赋值，因此函数体都是空的
  - 位于冒号和花括号之间：`Sales_item(): units_sold(0), revenue(0.0) { }`
## 访问控制与封装
- 访问说明符
  - `public` 定义在public后面的成员在整个程序中可以被访问， `public`定义类的接口。
  - `private` 定义在private后面的成员可以被类的成员函数访问，但不能被使用该类的代码访问。 `private`隐藏了类的实现细节。
- class vs struct [16,19]
  - 唯一的区别是默认**访问权限**不同
  - class(private)
  - struct(public)
- 友元 [20,22]
  - 允许特定的非成员函数访问一个类的私有成员。
  - 声明以关键字friend开始，friend Sales_data add(const Sales_data&, const Sales_data&);表示非成员函数add可以访问类的非公有成员。
  - 最好在类定义开始或结束前的位置声明友元。
  - 友元声明不能代替正常函数声明。
  - 类之间的友元类
    - 如果一个类指定了友元类，则友元类的成员函数可以访问此类包括non-public在内的所有成员。

## 类的其他特性
- inline函数 [23,26]
  - 类内部，一些较小的函数适合于被声明为内联函数。
  - 定义在类内部的成员函数是默认内联的。
  - 在类外部定义的成员函数，也可以在声明(类内)时显式的加上`inline`。
- 可变数据成员
  - mutable size_t access_ctr;
  - 及时在const函数中也可以修改。
- 类类型
  - 类的声明
    - 声明之后定义之前是不完全类型
    - 可以定义指向这种类型的指针和引用
    - 可以以该类型作为参数或者返回类型的函数声明中，但是不能用在函数定义中。